flowchart TB
    subgraph mmdr["mmdr (Rust - Native)"]
        A1[".mmd input"] --> B1["parser.rs"]
        B1 --> C1["ir.rs<br/>Graph IR"]
        C1 --> D1["layout.rs"]
        D1 --> D1a["dagre_rust<br/>(vendored)"]
        D1a --> E1["render.rs"]
        E1 --> F1["SVG"]
        F1 -.-> G1["resvg"]
        G1 -.-> H1["PNG"]
    end

    subgraph official["mermaid-cli (Node.js)"]
        A2[".mmd input"] --> B2["mermaid-js"]
        B2 --> C2["dagre"]
        C2 --> D2["Browser DOM"]
        D2 --> E2["Puppeteer"]
        E2 --> F2["Chromium<br/>(headless)"]
        F2 --> G2["Screenshot"]
        G2 --> H2["PNG/SVG"]
    end

    style mmdr fill:#e7f3e7,stroke:#2e7d32
    style official fill:#fff8e7,stroke:#f57c00
